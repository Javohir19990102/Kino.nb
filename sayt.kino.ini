import React, { useState } from 'react';
import { BrowserRouter as Router, Routes, Route, Link } from 'react-router-dom';
import { Card, CardContent } from '@/components/ui/card';
import { Input } from '@/components/ui/input';
import { Button } from '@/components/ui/button';
import { Star } from 'lucide-react';

const Navbar = () => (
  <nav className="bg-gray-900 text-white p-4 flex justify-between items-center">
    <h1 className="text-2xl font-bold">üé¨ KinoPortal</h1>
    <div className="space-x-4">
      <Link to="/" className="hover:text-yellow-400">–§–∏–ª—å–º—ã</Link>
      <Link to="/cartoons" className="hover:text-yellow-400">–ú—É–ª—å—Ç—Ñ–∏–ª—å–º—ã</Link>
      <Link to="/trailers" className="hover:text-yellow-400">–¢—Ä–µ–π–ª–µ—Ä—ã</Link>
      <Link to="/news" className="hover:text-yellow-400">–ù–æ–≤–æ—Å—Ç–∏</Link>
      <Link to="/coming-soon" className="hover:text-yellow-400">–°–∫–æ—Ä–æ –≤ –∫–∏–Ω–æ</Link>
    </div>
  </nav>
);

const Rating = ({ rating, setRating }) => (
  <div className="flex space-x-1">
    {[1, 2, 3, 4, 5].map((star) => (
      <Star
        key={star}
        className={`w-6 h-6 cursor-pointer ${rating >= star ? 'text-yellow-400' : 'text-gray-500'}`}
        onClick={() => setRating(star)}
      />
    ))}
  </div>
);

const CommentSection = ({ comments, setComments }) => {
  const [newComment, setNewComment] = useState('');

  const addComment = () => {
    if (newComment.trim()) {
      setComments([...comments, newComment]);
      setNewComment('');
    }
  };

  return (
    <div className="mt-4">
      <h4 className="text-lg">üí¨ –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏</h4>
      {comments.map((comment, index) => (
        <p key={index} className="text-sm text-gray-300">‚Ä¢ {comment}</p>
      ))}
      <Input
        placeholder="–î–æ–±–∞–≤–∏—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π..."
        value={newComment}
        onChange={(e) => setNewComment(e.target.value)}
        className="mt-2"
      />
      <Button onClick={addComment} className="mt-2">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</Button>
    </div>
  );
};

const Home = () => {
  const [rating, setRating] = useState(0);
  const [filter, setFilter] = useState('');
  const [comments, setComments] = useState([]);
  const [sortByRating, setSortByRating] = useState(false);

  const movies = [
    { title: '–ù–∞–∑–≤–∞–Ω–∏–µ —Ñ–∏–ª—å–º–∞', genre: '–î—Ä–∞–º–∞', year: '2024', rating: 4 },
    { title: '–≠–∫—à–µ–Ω –ë–ª–æ–∫–±–∞—Å—Ç–µ—Ä', genre: '–≠–∫—à–µ–Ω', year: '2023', rating: 5 },
    { title: '–ö–æ–º–µ–¥–∏—è', genre: '–ö–æ–º–µ–¥–∏—è', year: '2022', rating: 3 }
  ];

  const filteredMovies = movies
    .filter(movie =>
      movie.genre.toLowerCase().includes(filter.toLowerCase()) ||
      movie.year.includes(filter)
    )
    .sort((a, b) => (sortByRating ? b.rating - a.rating : 0));

  return (
    <div className="p-6 text-white">
      <h2 className="text-3xl mb-4">üé¨ –ù–æ–≤—ã–µ —Ñ–∏–ª—å–º—ã</h2>
      <Input
        placeholder="üîç –§–∏–ª—å—Ç—Ä –ø–æ –∂–∞–Ω—Ä—É –∏–ª–∏ –≥–æ–¥—É..."
        value={filter}
        onChange={(e) => setFilter(e.target.value)}
        className="mb-4"
      />
      <Button onClick={() => setSortByRating(!sortByRating)} className="mb-4">
        {sortByRating ? '–°–±—Ä–æ—Å–∏—Ç—å —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫—É' : '–°–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ —Ä–µ–π—Ç–∏–Ω–≥—É'}
      </Button>
      <div className="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4">
        {filteredMovies.map((movie, index) => (
          <Card key={index}>
            <CardContent>
              <img src="https://via.placeholder.com/300x400" alt="Film Poster" className="rounded-xl" />
              <h3 className="text-xl mt-2">{movie.title}</h3>
              <p className="text-sm text-gray-400">{movie.genre} | {movie.year}</p>
              <Rating rating={movie.rating} setRating={setRating} />
              <CommentSection comments={comments} setComments={setComments} />
            </CardContent>
          </Card>
        ))}
      </div>
    </div>
  );
};

const Cartoons = () => <div className="p-6 text-white text-2xl">üé® –ú—É–ª—å—Ç—Ñ–∏–ª—å–º—ã</div>;

const Trailers = () => (
  <div className="p-6 text-white">
    <h2 className="text-3xl mb-4">üéûÔ∏è –¢—Ä–µ–π–ª–µ—Ä—ã</h2>
    <video controls className="w-full rounded-xl">
      <source src="https://www.w3schools.com/html/mov_bbb.mp4" type="video/mp4" />
      –í–∞—à –±—Ä–∞—É–∑–µ—Ä –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –≤–∏–¥–µ–æ.
    </video>
  </div>
);

const News = () => <div className="p-6 text-white text-2xl">üì∞ –ù–æ–≤–æ—Å—Ç–∏ –æ –∫–∏–Ω–æ</div>;

const ComingSoon = () => (
  <div className="p-6 text-white">
    <h2 className="text-3xl mb-4">üî• –°–∫–æ—Ä–æ –≤ –∫–∏–Ω–æ</h2>
    <div className="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4">
      <Card>
        <CardContent>
          <img src="https://via.placeholder.com/300x400" alt="Coming Soon" className="rounded-xl" />
          <h3 className="text-xl mt-2">–ë—É–¥—É—â–∏–π —Ñ–∏–ª—å–º</h3>
          <p className="text-sm text-gray-400">–ñ–∞–Ω—Ä | –î–∞—Ç–∞ –≤—ã—Ö–æ–¥–∞</p>
        </CardContent>
      </Card>
    </div>
  </div>
);

export default function App() {
  return (
    <Router>
      <div className="min-h-screen bg-gray-800">
        <Navbar />
        <Routes>
          <Route path="/" element={<Home />} />
          <Route path="/cartoons" element={<Cartoons />} />
          <Route path="/trailers" element={<Trailers />} />
          <Route path="/news" element={<News />} />
          <Route path="/coming-soon" element={<ComingSoon />} />
        </Routes>
      </div>
    </Router>
  );
}
